<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="color-scheme" content="dark" />
  <title>TruthVerify — Request Verification</title>
  <meta name="description" content="Submit a verification request. See the checks. Pending status. Pay only after verified." />

  <style>
    :root{
      --bg:#07080b; --panel:rgba(255,255,255,.05); --border:rgba(255,255,255,.10);
      --text:rgba(255,255,255,.92); --muted:rgba(255,255,255,.65);
      --gold:#d7b85a; --good:#58d08a; --warn:#f7c35f;
      --shadow:0 16px 60px rgba(0,0,0,.55); --radius:18px; --max:980px;
      --sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
    }
    *{box-sizing:border-box}
    body{
      margin:0; font-family:var(--sans); color:var(--text); line-height:1.45;
      background:
        radial-gradient(1200px 700px at 20% 10%, rgba(215,184,90,.10), transparent 60%),
        radial-gradient(900px 600px at 80% 0%, rgba(88,208,138,.06), transparent 55%),
        var(--bg);
    }
    a{color:inherit}
    .wrap{max-width:var(--max); margin:0 auto; padding:22px 16px 70px;}
    .top{
      display:flex; align-items:center; justify-content:space-between; gap:12px;
      padding:14px 16px; border:1px solid var(--border); border-radius:var(--radius);
      background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
      box-shadow:var(--shadow); backdrop-filter: blur(10px);
    }
    .brand{display:flex; align-items:center; gap:10px;}
    .mark{width:36px;height:36px;border-radius:12px;border:1px solid rgba(255,255,255,.12);background:rgba(255,255,255,.04)}
    .brand h1{margin:0;font-size:14px;font-weight:850}
    .brand p{margin:0;font-size:12px;color:var(--muted)}
    .btn{
      display:inline-flex; align-items:center; justify-content:center; gap:10px;
      padding:10px 12px; border-radius:999px;
      border:1px solid rgba(255,255,255,.12); background:rgba(255,255,255,.04);
      text-decoration:none; font-size:12.5px; color:var(--text); user-select:none;
    }
    .btn.primary{border-color: rgba(215,184,90,.32); background: rgba(215,184,90,.12);}
    .btn:active{transform:translateY(1px)}
    .card{
      margin-top:14px; border:1px solid var(--border); border-radius:var(--radius);
      background:rgba(0,0,0,.18); box-shadow:0 10px 36px rgba(0,0,0,.35); padding:16px;
    }
    h2{margin:0 0 8px; font-size:26px; letter-spacing:-.2px}
    .sub{margin:0 0 14px; color:var(--muted); font-size:14px}
    .grid{display:grid; grid-template-columns:1.05fr .95fr; gap:14px; margin-top:14px;}
    @media (max-width: 900px){ .grid{grid-template-columns:1fr;} }
    label{display:block; font-size:12.5px; color:var(--muted); margin:10px 0 6px;}
    input, select, textarea{
      width:100%; padding:12px 12px; border-radius:12px;
      border:1px solid rgba(255,255,255,.12); background:rgba(0,0,0,.25);
      color:var(--text); font-size:14px; outline:none;
    }
    textarea{min-height:92px; resize:vertical}
    .row2{display:grid; grid-template-columns:1fr 1fr; gap:10px;}
    @media (max-width: 700px){ .row2{grid-template-columns:1fr;} }
    .note{font-size:12px; color:rgba(255,255,255,.55); margin-top:10px}
    .mono{font-family:var(--mono)}
    .steps{margin-top:10px; display:grid; gap:10px;}
    .step{
      border:1px solid rgba(255,255,255,.10);
      background:rgba(255,255,255,.03);
      border-radius:14px; padding:12px;
      display:flex; align-items:flex-start; gap:10px;
    }
    .dot{
      width:26px; height:26px; border-radius:10px;
      border:1px solid rgba(255,255,255,.14);
      display:flex; align-items:center; justify-content:center;
      font-weight:900; font-size:12px;
      background:rgba(0,0,0,.25);
      flex:0 0 auto;
    }
    .dot.wait{color:rgba(255,255,255,.55)}
    .dot.run{color:var(--warn); border-color:rgba(247,195,95,.25); background:rgba(247,195,95,.08)}
    .dot.ok{color:var(--good); border-color:rgba(88,208,138,.25); background:rgba(88,208,138,.08)}
    .dot.fail{color:#ff6b7a; border-color:rgba(255,107,122,.25); background:rgba(255,107,122,.08)}
    .step b{display:block; margin-bottom:2px;}
    .step small{display:block; color:var(--muted); font-size:12.5px;}
    .banner{
      display:none;
      border:1px solid rgba(215,184,90,.28);
      background: rgba(215,184,90,.10);
      border-radius: 14px;
      padding: 12px;
      margin-top: 12px;
    }
    .pending{
      display:none;
      border:1px solid rgba(247,195,95,.22);
      background: rgba(247,195,95,.06);
      border-radius: 14px;
      padding: 12px;
      margin-top: 12px;
    }
    .actionsRow{display:flex; gap:10px; flex-wrap:wrap; margin-top:12px;}
  </style>
</head>

<body>
  <div class="wrap">
    <header class="top">
      <div class="brand">
        <div class="mark" aria-hidden="true"></div>
        <div>
          <h1>TruthVerify</h1>
          <p>Request → Show checks → Pending → Verified → Pay + Download</p>
        </div>
      </div>
      <nav style="display:flex; gap:10px; flex-wrap:wrap; justify-content:flex-end;">
        <a class="btn" href="./">Home</a>
        <a class="btn" href="./v/">/v dashboard</a>
      </nav>
    </header>

    <section class="card">
      <h2>Request verification (creator)</h2>
      <p class="sub">
        Submit your links/proof first. We show every step we run. You only pay after verification is complete and your badge assets are ready.
      </p>
      <div class="note">
        v1 is “phone-maintainable”: this page generates a Request ID + a copyable submission summary. (No server upload yet.)
      </div>
    </section>

    <section class="grid">
      <!-- LEFT: Form -->
      <div class="card">
        <h2 style="font-size:18px; margin-bottom:6px;">Step 1 — Submit proof</h2>
        <p class="sub" style="margin-bottom:10px;">Paste URLs and attach any files you want us to consider.</p>

        <form id="reqForm">
          <div class="row2">
            <div>
              <label>Creator name</label>
              <input id="creator_name" placeholder="Your name or brand name" required />
            </div>
            <div>
              <label>Platform</label>
              <select id="platform" required>
                <option value="tiktok">TikTok</option>
                <option value="instagram">Instagram</option>
                <option value="youtube">YouTube</option>
                <option value="x">X</option>
                <option value="other">Other</option>
              </select>
            </div>
          </div>

          <div class="row2">
            <div>
              <label>Handle</label>
              <input id="handle" placeholder="@yourhandle" required />
            </div>
            <div>
              <label>Email (for receipt + follow-up)</label>
              <input id="email" type="email" placeholder="you@email.com" required />
            </div>
          </div>

          <label>Profile URL</label>
          <input id="profile_url" placeholder="https://..." required />

          <label>Content URL (optional)</label>
          <input id="content_url" placeholder="https://..." />

          <label>Attach proof files (optional)</label>
          <input id="files" type="file" multiple />

          <label>Notes (optional)</label>
          <textarea id="notes" placeholder="Anything we should know?"></textarea>

          <div class="actionsRow">
            <button type="submit" class="btn primary">Start verification steps →</button>
            <button type="button" class="btn" id="copyBtn" style="display:none;">Copy submission summary</button>
          </div>

          <div class="banner" id="banner">
            Request ID: <span class="mono" id="reqId"></span><br/>
            Keep this. You can share it with TruthVerify to match your request.
          </div>

          <div class="pending" id="pendingBox">
            <b>Pending verification</b>
            <div style="color:rgba(255,255,255,.75); font-size:13px; margin-top:4px;">
              Your request is recorded as <span class="mono" id="pendingId"></span>.
              We’ll mark it <b>Verified</b> when complete — then payment unlocks.
            </div>
            <div style="margin-top:10px; display:flex; gap:10px; flex-wrap:wrap;">
              <a class="btn" id="viewStatusBtn" href="./v/" title="Open public dashboard">View /v status</a>
              <a class="btn primary" id="payLaterBtn" href="#" style="pointer-events:none; opacity:.5;">Pay & download (unlocks after Verified)</a>
            </div>
            <div class="note" style="margin-top:10px;">
              Payment is intentionally locked until verified. When you’re verified, this button will work.
            </div>
          </div>

          <div class="note">
            Files are selected on your device; in v1 you’ll still copy/share links + notes. (We can add upload later with Firebase.)
          </div>
        </form>
      </div>

      <!-- RIGHT: Steps -->
      <div class="card">
        <h2 style="font-size:18px; margin-bottom:6px;">Step 2 — What we do (live)</h2>
        <p class="sub" style="margin-bottom:10px;">
          Transparent checks. Calm. Repeatable. No drama.
        </p>

        <div class="steps" id="steps">
          <div class="step" data-step="1">
            <div class="dot wait" id="d1">1</div>
            <div>
              <b>Input validation</b>
              <small>Check links format and required fields</small>
            </div>
          </div>
          <div class="step" data-step="2">
            <div class="dot wait" id="d2">2</div>
            <div>
              <b>Profile consistency</b>
              <small>Handle + continuity markers (reduces impersonation risk)</small>
            </div>
          </div>
          <div class="step" data-step="3">
            <div class="dot wait" id="d3">3</div>
            <div>
              <b>Link & redirect safety</b>
              <small>Basic phishing/redirect mismatch heuristics</small>
            </div>
          </div>
          <div class="step" data-step="4">
            <div class="dot wait" id="d4">4</div>
            <div>
              <b>Content integrity screening (limited)</b>
              <small>Heuristic flags; escalates to manual review if needed</small>
            </div>
          </div>
          <div class="step" data-step="5">
            <div class="dot wait" id="d5">5</div>
            <div>
              <b>Create pending record</b>
              <small>Issue Request ID + mark as Pending</small>
            </div>
          </div>
        </div>

        <div class="note" style="margin-top:12px;">
          This animation is a transparent preview. In v2 we’ll replace “simulated” with real scan outputs.
        </div>
      </div>
    </section>
  </div>

  <script>
    function makeId(){
      const d = new Date();
      const y = d.getFullYear();
      const m = String(d.getMonth()+1).padStart(2,'0');
      const day = String(d.getDate()).padStart(2,'0');
      const rand = Math.random().toString(36).slice(2,6).toUpperCase();
      return `TV-REQ-${y}${m}${day}-${rand}`;
    }

    const form = document.getElementById('reqForm');
    const banner = document.getElementById('banner');
    const reqIdEl = document.getElementById('reqId');
    const pendingBox = document.getElementById('pendingBox');
    const pendingId = document.getElementById('pendingId');
    const copyBtn = document.getElementById('copyBtn');
    const payLaterBtn = document.getElementById('payLaterBtn');

    function setDot(n, state, text){
      const el = document.getElementById('d'+n);
      el.classList.remove('wait','run','ok','fail');
      el.classList.add(state);
      el.textContent = text || n;
    }

    async function runSteps(){
      // reset
      [1,2,3,4,5].forEach(i=>setDot(i,'wait', i));
      // run sequential
      const seq = [
        {n:1, delay:600},
        {n:2, delay:900},
        {n:3, delay:900},
        {n:4, delay:900},
        {n:5, delay:600},
      ];
      for (const s of seq){
        setDot(s.n,'run','…');
        await new Promise(r=>setTimeout(r, s.delay));
        setDot(s.n,'ok','✓');
      }
    }

    form.addEventListener('submit', async (e)=>{
      e.preventDefault();

      const id = makeId();
      reqIdEl.textContent = id;
      pendingId.textContent = id;

      banner.style.display = "block";
      copyBtn.style.display = "inline-flex";

      // build a copyable summary (for phone-maintainable v1)
      const files = document.getElementById('files').files;
      const fileNames = Array.from(files || []).map(f=>f.name);

      const summary = [
        `TruthVerify — Verification Request`,
        `Request ID: ${id}`,
        `Creator name: ${document.getElementById('creator_name').value}`,
        `Platform: ${document.getElementById('platform').value}`,
        `Handle: ${document.getElementById('handle').value}`,
        `Email: ${document.getElementById('email').value}`,
        `Profile URL: ${document.getElementById('profile_url').value}`,
        `Content URL: ${document.getElementById('content_url').value || '(none)'}`,
        `Files attached (names): ${fileNames.length ? fileNames.join(', ') : '(none)'}`,
        `Notes: ${document.getElementById('notes').value || '(none)'}`
      ].join('\n');

      copyBtn.onclick = async ()=>{
        try{
          await navigator.clipboard.writeText(summary);
          copyBtn.textContent = "Copied ✅";
          setTimeout(()=> copyBtn.textContent="Copy submission summary", 1400);
        }catch(err){
          alert("Copy failed. Screenshot this page as backup.");
        }
      };

      await runSteps();

      // lock payment until verified
      payLaterBtn.href = `./pay.html?req=${encodeURIComponent(id)}`;
      payLaterBtn.style.pointerEvents = "none";
      payLaterBtn.style.opacity = ".5";

      pendingBox.style.display = "block";
      pendingBox.scrollIntoView({behavior:"smooth", block:"start"});
    });
  </script>
</body>
</html>